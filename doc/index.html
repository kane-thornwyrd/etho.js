<!DOCTYPE html>

<html>
<head>
  <title>index.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>index.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <h2 id="umd-js-wrapper-">UMD.js wrapper.</h2>

            </div>
            
            <div class="content"><div class='highlight'><pre>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">root, factory</span>) </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> define === <span class="hljs-string">'function'</span> &amp;&amp; define.amd) {</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>AMD.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    define([], <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> factory();
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>Commonjs.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> exports !== <span class="hljs-string">'undefined'</span>){
    exports = <span class="hljs-built_in">module</span>.exports = factory();
  } <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>Browser globals.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    factory();
  }
}(<span class="hljs-keyword">this</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <h1 id="etho-js">etho.js</h1>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  <span class="hljs-keyword">var</span> etho = {};</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <h3 id="ucfirst">ucfirst</h3>
<p>Uppercase the first letter of the string passed as argument.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  etho.ucfirst = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ethoUcfirst</span>(<span class="hljs-params">str</span>)</span>{
    <span class="hljs-keyword">return</span> str.substr(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>).toUpperCase() + str.substr(<span class="hljs-number">1</span>);
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <h3 id="gettype">getType</h3>
<p>Return the <em>true</em> type of anything as a string.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  etho.getType = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ethoGetType</span>(<span class="hljs-params">thing</span>)</span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.prototype.toString.call(thing).match(<span class="hljs-regexp">/^\[object\s+(\w+)\]$/</span>)[<span class="hljs-number">1</span>].toLowerCase();
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <h3 id="toarraysliced">toArraySliced</h3>
<p>Try to transform anything into an array and slice it.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  etho.toArraySliced = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ethoToArraySliced</span>(<span class="hljs-params">obj, sliceStart, sliceEnd</span>)</span>{
    sliceStart = sliceStart || <span class="hljs-number">0</span>;
    <span class="hljs-keyword">if</span>(etho.isA(<span class="hljs-string">'undefined'</span>, sliceEnd)){
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Array</span>.prototype.slice.call(obj, sliceStart);
    }<span class="hljs-keyword">else</span>{
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Array</span>.prototype.slice.call(obj, sliceStart, sliceEnd);
    }
  };

  etho.isA = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ethoIsA</span>(<span class="hljs-params">type, obj</span>)</span>{
    <span class="hljs-keyword">return</span> etho.getType(obj) === type;
  };

  etho.shallowCopy = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ethoShallowCopy</span>(<span class="hljs-params">obj</span>)</span>{
    <span class="hljs-keyword">var</span> out = {};
    <span class="hljs-keyword">switch</span>(etho.getType(obj)){
      <span class="hljs-keyword">case</span> <span class="hljs-string">'array'</span>:
        <span class="hljs-keyword">return</span> etho.toArraySliced(obj);
      <span class="hljs-keyword">case</span> <span class="hljs-string">'object'</span>:
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> obj){
          <span class="hljs-keyword">if</span>(
            etho.isA(<span class="hljs-string">'array'</span>,obj[key]) ||
            etho.isA(<span class="hljs-string">'object'</span>,obj[key])
          ){
            out[key] = etho.shallowCopy(obj[key]);
          }<span class="hljs-keyword">else</span>{
            out[key] = obj[key];
          }
        }
      <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">default</span>:
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Exception(<span class="hljs-string">'Wrong Type.'</span>);
    };
    <span class="hljs-keyword">return</span> out;
  };

  etho.forEach = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ethoForeach</span>(<span class="hljs-params">obj, iterator, context</span>) </span>{

    <span class="hljs-keyword">if</span> (obj === <span class="hljs-literal">null</span>){ <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'no object to iterate on !'</span>);}

    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> context === <span class="hljs-string">'undefined'</span>){ context = <span class="hljs-keyword">this</span>; }

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> obj) {
      <span class="hljs-keyword">if</span> ({}.hasOwnProperty.call(obj, key)) {
        iterator.call(context, obj[key], key, obj);
      }
    }

    <span class="hljs-keyword">return</span> obj;
  };

  etho.merge = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ethoMerge</span>(<span class="hljs-params">target, seed<span class="hljs-comment">/*, seed*â€¦ */</span></span>)</span>{
    <span class="hljs-keyword">var</span> _return = etho.shallowCopy(target);
    <span class="hljs-keyword">if</span>(etho.isA(<span class="hljs-string">'undefined'</span>, seed)){ <span class="hljs-keyword">return</span> _return; }
    <span class="hljs-keyword">var</span> args = etho.toArraySliced(<span class="hljs-built_in">arguments</span>, <span class="hljs-number">1</span>);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; args.length; i++) {
      <span class="hljs-keyword">var</span> src = args[i];
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> prop <span class="hljs-keyword">in</span> _return) {
        <span class="hljs-keyword">if</span> (
          _return.hasOwnProperty(prop) &amp;&amp;
          !etho.isA(<span class="hljs-string">'function'</span>,_return[prop]) &amp;&amp;
          <span class="hljs-keyword">typeof</span> _return[prop] === <span class="hljs-keyword">typeof</span> src[prop]
        ){
          <span class="hljs-keyword">switch</span>(etho.getType(_return[prop])){
            <span class="hljs-keyword">case</span> <span class="hljs-string">'object'</span>:
              _return[prop] = etho.merge(_return[prop], src[prop]);
            <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">default</span>:
              _return[prop] = src[prop];
          }
        } <span class="hljs-keyword">else</span> { <span class="hljs-keyword">continue</span>; }
      }
    }
    <span class="hljs-keyword">return</span> _return;
  };

  etho.inherit = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ethoInherit</span>(<span class="hljs-params">child, parent</span>) </span>{
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> parent) {
      <span class="hljs-keyword">if</span> ({}.hasOwnProperty.call(parent, key)){
        child[key] = parent[key];
      }
    }

    <span class="hljs-keyword">var</span> wrapper = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">wrapper</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">this</span>.constructor = child; }

    wrapper.prototype = parent.prototype;
    child.prototype = <span class="hljs-keyword">new</span> wrapper();
    child.__super__ = parent.prototype;
    <span class="hljs-keyword">return</span> child;
  };

  etho.x = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ethoX</span>(<span class="hljs-params">classname, customConstructor, parentClass</span>)</span>{
    <span class="hljs-keyword">var</span> args = etho.toArraySliced(<span class="hljs-built_in">arguments</span>, <span class="hljs-number">1</span>);

    <span class="hljs-keyword">if</span>(args.length === <span class="hljs-number">0</span>){
      parentClass = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Lambda</span>(<span class="hljs-params"></span>)</span>{};
    }

    <span class="hljs-keyword">var</span> CHILD = <span class="hljs-keyword">this</span>[classname] = customConstructor || etho.x.minimalConstructor();


    <span class="hljs-keyword">if</span>(etho.isA(<span class="hljs-string">'undefined'</span>, classname)){
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'classname is missing !'</span>);
    }

    <span class="hljs-keyword">if</span>(etho.isA(<span class="hljs-string">'undefined'</span>, parentClass)){
      parentClass = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Lambda</span>(<span class="hljs-params"></span>)</span>{};
    }

    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">protoCreation</span>(<span class="hljs-params">proto</span>)</span>{

      <span class="hljs-keyword">return</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">parent</span>)</span>{
        etho.inherit(CHILD, parent);

        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> attr <span class="hljs-keyword">in</span> proto){
          <span class="hljs-keyword">if</span>( proto.hasOwnProperty( attr ) ) {
            CHILD.prototype[attr] = proto[attr];
          }
        }

        <span class="hljs-keyword">var</span> autoSuper = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">autoSuper</span>(<span class="hljs-params">method</span>)</span>{
          <span class="hljs-keyword">if</span>(
            !etho.isA(<span class="hljs-string">'undefined'</span>, CHILD.__super__) &amp;&amp;
            etho.isA(<span class="hljs-string">'undefined'</span>, CHILD.__super__[method])
          ){
            <span class="hljs-keyword">return</span> CHILD.__super__[method];
          }
        };

        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> oldattr <span class="hljs-keyword">in</span> parent){
          <span class="hljs-keyword">if</span>( parent.hasOwnProperty( oldattr ) ) {
            CHILD.prototype[oldattr] = autoSuper(oldattr);
          }
        }

        <span class="hljs-keyword">return</span> CHILD;

      })(parentClass);
    }
  };

  etho.x.minimalConstructor = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{ <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ethoGenericConstructor</span>(<span class="hljs-params">options</span>)</span>{
    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.defaultOptions){
      <span class="hljs-keyword">this</span>.options = etho.merge(<span class="hljs-keyword">this</span>.defaultOptions, options);
    }<span class="hljs-keyword">else</span>{
      <span class="hljs-keyword">this</span>.options = options;
    }
    <span class="hljs-keyword">if</span>( <span class="hljs-keyword">this</span>.init ){ <span class="hljs-keyword">this</span>.init(); }
    <span class="hljs-keyword">if</span>( <span class="hljs-keyword">this</span>.listen ){ <span class="hljs-keyword">this</span>.listen(); }
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  };};

  <span class="hljs-keyword">return</span> etho;
}));</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
