!function(a,b){"function"==typeof define&&define.amd?define([],function(){return b()}):"undefined"!=typeof exports?exports=module.exports=b():b()}(this,function(){var a={};return a.ucfirst=function(a){return a.substr(0,1).toUpperCase()+a.substr(1)},a.getType=function(a){return Object.prototype.toString.call(a).match(/^\[object\s+(\w+)\]$/)[1].toLowerCase()},a.toArraySliced=function(b,c,d){return c=c||0,a.isA("undefined",d)?Array.prototype.slice.call(b,c):Array.prototype.slice.call(b,c,d)},a.isA=function(b,c){return a.getType(c)===b},a.shallowCopy=function(b){var c={};switch(a.getType(b)){case"array":return a.toArraySliced(b);case"object":for(var d in b)a.isA("array",b[d])||a.isA("object",b[d])?c[d]=a.shallowCopy(b[d]):c[d]=b[d];break;default:throw new Exception("Wrong Type.")}return c},a.forEach=function(a,b,c){if(null===a)throw new Error("no object to iterate on !");"undefined"==typeof c&&(c=this);for(var d in a)({}).hasOwnProperty.call(a,d)&&b.call(c,a[d],d,a);return a},a.merge=function(b,c){var d=a.shallowCopy(b);if(a.isA("undefined",c))return d;for(var e=a.toArraySliced(arguments,1),f=0;f<e.length;f++){var g=e[f];for(var h in d)if(d.hasOwnProperty(h)&&!a.isA("function",d[h])&&typeof d[h]==typeof g[h])switch(a.getType(d[h])){case"object":d[h]=a.merge(d[h],g[h]);break;default:d[h]=g[h]}}return d},a.inherit=function(a,b){for(var c in b)({}).hasOwnProperty.call(b,c)&&(a[c]=b[c]);var d=function(){this.constructor=a};return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},a.x=function(b,c,d){var e=a.toArraySliced(arguments,1);0===e.length&&(d=function(){});var f=this[b]=c||a.x.minimalConstructor();if(a.isA("undefined",b))throw new Error("classname is missing !");return a.isA("undefined",d)&&(d=function(){}),function(b){return function(c){a.inherit(f,c);for(var d in b)b.hasOwnProperty(d)&&(f.prototype[d]=b[d]);var e=function(b){return!a.isA("undefined",f.__super__)&&a.isA("undefined",f.__super__[b])?f.__super__[b]:void 0};for(var g in c)c.hasOwnProperty(g)&&(f.prototype[g]=e(g));return f}(d)}},a.x.minimalConstructor=function(){return function(b){return this.defaultOptions?this.options=a.merge(this.defaultOptions,b):this.options=b,this.init&&this.init(),this.listen&&this.listen(),this}},a});